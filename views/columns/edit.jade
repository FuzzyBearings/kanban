extends ../layout

block content
	p
		a(href="/w/boards") All Boards
		|&nbsp;|&nbsp;
		a(href="/w/boards/0") New Board
		|&nbsp;|&nbsp;
		a(href='/w/boards/#{board._id}') View Board
		|&nbsp;|&nbsp;
		a(href="/w/columns/#{column._id}") View Column
		|&nbsp;|&nbsp;
		a(href="/w/columns/#{column._id}?action=delete") Delete Column
		
	-
		var columnName = "";
		var columnId = 0;
		var sortOrder = 0;
		columnName = column.name;
		columnId = column._id;
		sortOrder = column.sortOrder;

	h1 Edit Column

	h2 Column
	
	p
		form(method="post", action="/w/columns/update")
			input(type="text", name="columnName", placeholder="Column Name" value="#{columnName}")
			button(type="submit") submit
			input(type="hidden", name="columnId", value="#{columnId}")
			input(type="hidden", name="boardId", value="#{board._id}")
			input(type="hidden", name="sortOrder", value="#{sortOrder}")

	if columnName
		h2 New Story
		p
			form(method="post", action="/w/stories/update")
				input(type="text", name="sortOrder", size="3")
				input(type='text', name='storyName')
				input(type="hidden", name="columnId", value="#{columnId}")
				button(type="submit") submit

	if stories
		h2 Existing Stories
		each story in stories
			p
				form(method="post", action="/w/stories/update")
					input(type="text", name="sortOrder", value="#{story.sortOrder}", size="3")
					input(type="text", name="storyName", value="#{story.name}")
					input(type="hidden", name="storyId", value="#{story._id}")
					input(type="hidden", name="columnId", value="#{columnId}")
					input(type="hidden", name="source" value="columns/edit")
					button(type="submit") submit
